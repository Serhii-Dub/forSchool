<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>AR Car Test</title>
  <style>
    html,body{margin:0;padding:0;overflow:hidden;background:#111;}
    #info {
      position: absolute; top: 10px; left: 0; right: 0; z-index: 10;
      color: #fff; font-family: Segoe UI,Arial,sans-serif; text-align: center;
      text-shadow: 0 1px 8px #000c;
      font-size: 1.11em;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div id="info">
    <b>AR Car Test</b><br>
    Якщо не бачиш кнопку — ПЕРЕВІР КОНСОЛЬ (завжди JS-помилка!)<br>
    (імпорти такі ж як у робота)
  </div>
  <script type="module">
    import * as THREE from 'https://unpkg.com/three@0.161.0/build/three.module.js';
    import { GLTFLoader } from 'https://unpkg.com/three@0.161.0/examples/jsm/loaders/GLTFLoader.js';
    import { ARButton } from 'https://unpkg.com/three@0.161.0/examples/jsm/webxr/ARButton.js';

    let camera, scene, renderer;
    let car;

    scene = new THREE.Scene();
    camera = new THREE.PerspectiveCamera();

    renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setPixelRatio(window.devicePixelRatio);
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.xr.enabled = true;
    document.body.appendChild(renderer.domElement);

    // ARButton — якщо дійшло до сюди, кнопка буде!
    document.body.appendChild(ARButton.createButton(renderer, { requiredFeatures: ['hit-test'] }));

    // Світло
    scene.add(new THREE.HemisphereLight(0xffffff, 0x444444, 1.3));
    scene.add(new THREE.DirectionalLight(0xffffff, 0.4));

    // Спробуй просто одну машину — наприклад, car/car1.glb
    const loader = new GLTFLoader();
    loader.load('car/car1.glb', gltf=>{
      car = gltf.scene;
      let box = new THREE.Box3().setFromObject(car);
      let center = box.getCenter(new THREE.Vector3());
      car.position.set(0, -center.y, -1.2); // “стояла” на підлозі, перед камерою
      car.scale.setScalar(1);
      scene.add(car);
    }, undefined, err=>{
      alert('Помилка завантаження car/car1.glb');
    });

    renderer.setAnimationLoop(()=>renderer.render(scene, camera));
  </script>
</body>
</html>
